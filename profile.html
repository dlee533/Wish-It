<!DOCTYPE html>
<html lang="en">

<head>
    <title>Bootstrap 4 Website Example</title>
    <meta charset="utf-8">


    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>main.html</title>
    <script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-firestore.js"></script>
    <script src="firebaseConfig.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

    <link rel='stylesheet' type='text/css' href="mainCss.css">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="main.html">WishIt</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="#">My Wishlist</a>
                    </li>
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Friends</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- search bar-->
    <div class='container'></div>
    <div class="form-inline center col-12  col-md-8 col-lg-6">
        <input class="form-control col-10 search-bar" type="text" placeholder="Search" aria-label="Search">
        <button type='submit' class='btn search-btn col-2'>Search</button>
    </div>
    </div>

    <!--user bio-->
    <div class="container col-12 col-md-10">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <img class="profileImage col-6 col-lg-4 center responsive" id="profilePhoto" src="images/profile_pic.png"
                        onclick="uploadProfilePhoto(this)">
                    <div class="container col-6">
                        <h3><span class="name" id="shortBio"></span>
                            <p class="name" id="displayName">Name</p>
                            <button class="btn followingStatus responsive">Wishlist</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- friends list
    <div class="container col-12 col-md-10">
        <h1 class="display-3">Friends list</h1>
        <div class='card col-6 col-md-4 col-lg-2'>
            <div class='card-body'>
                <img class='friendPic' src='#'>
                <p class='friendName'>Name</p>
            </div>
        </div>
    </div> -->

    <!-- wishlist-->
    <div class="container col-12 col-md-10">
        <h1 class="display-3">Wish list</h1>
        <div class="card">
            <!--clone this element with jquery and append to the end of closing div of class="card"-->
            <div class="card-body">
                <div class="form-inline">
                    <input type="radio"><!-- initially set the raio button display to none-->
                    <!--set the value to the item name/other identificaftion-->
                    <div class="row">
                        <span class="itemName">Item Name</span>: $<span class="itemPrice">Item
                            price
                        </span>
                    </div>
                </div>
            </div>
        </div>
        <button class="btn submit save">Save</button> <!--with js, set the display of this element to none until
        'check off items' button clicked. -->
        <buttton class="btn checkOffItems">Check off items</buttton> <!--onclick: set the display to none and
        display the save button+display the radio button on item cards-->
    </div>

        <script>
            let db = firebase.firestore();
            let queryStringURL = decodeURIComponent(window.location.search);
            let tempVar = queryStringURL.split('?');
            let uid = tempVar[1];
            console.log(uid, typeof (uid));
            //let userData;
            //let storage = firebase.storage().ref;

            function getUserData() {
                db.collection("users").doc(uid).get()
                    .then(function (doc) {
                        if (doc.exists) {
                            console.log(doc.data());
                            updateElements(doc.data());
                        } else {
                            // doc.data() will be undefined in this case
                            console.log("No such document!");
                        }
                    }).catch(function (error) {
                        console.log("Error getting document:", error);
                    });
            }
            getUserData();
            function updateElements(userData) {
                displayNameElem = document.getElementById("displayName");
                displayNameElem.innerHTML = userData.display_name;
                displayShortBioElem = document.getElementById("shortBio");
                displayShortBioElem.innerHTML = userData.short_bio; //to be updated to db once user sets one
                displayProfilePhoto = document.getElementById("profilePhoto");
                displayProfilePhoto.setAttribute("SRC", userData.profile_photo); // to be updated on db storage once user uploads manually
                displayNameElem = document.getElementById("displayName");
                displayNameElem.innerHTML = userData.display_name;
            }
            function uploadProfilePhoto(elem) {
            }

        </script>
</body>

</html>